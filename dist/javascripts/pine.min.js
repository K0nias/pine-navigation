/**
* pine.js v0.0.1
*/
window.matchMedia=window.matchMedia||function(a){"use strict";var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(document);var Pine=window.Pine||{};Pine.Submenu=function(a){"use strict";var b=null,c={};return c.hover=function(c){var d=a(this),e=d.find("> ul");"mouseenter"==c.type?(e.addClass("is-hover"),clearTimeout(b)):b=setTimeout(function(){e.removeClass("is-hover"),d.removeClass("is-open")},300)},c.toggle=function(b){var c=a(this),d=c.parent().closest("li"),e=d.hasClass("is-open"),f=b,g=b.data.activeTransition&&b.data.activeTransition.onToggle;if(e){if(d.find("> ul").hasClass("is-hover"))return;g&&"function"==typeof g&&g.call(this,e),d.trigger(b=a.Event("hide.submenu")),d.removeClass("is-open").trigger("hidden.submenu")}else g&&"function"==typeof g&&g.call(this,e),d.trigger(b=a.Event("show.submenu")),"mouseenter"==f.type&&d.find("> ul").addClass("is-hover"),d.addClass("is-open").trigger("shown.submenu");return!1},c}(window.Zepto||window.jQuery,window);var Pine=window.Pine||{};Pine.Navbar=function(a,b){"use strict";var c={};return c.isLargeDisplay=null,c.element=null,c.DEFAULTS={jsBreakpoint:"600px",transitionLargeDisplay:"fx-hover",transitionSmallDisplay:"fx-toggle"},c.NAVBAR_TOGGLE="[data-pine=toggle]",c.SUBMENU=".has-submenu",c.options=null,c.transitions={},c.activeTransition={},c.init=function(c,d){this.options=a.extend({},this.DEFAULTS,d),this.element=a(c),this.isLargeDisplay=b.matchMedia("(min-width: "+this.options.jsBreakpoint+")").matches,this.isLargeDisplay?this.setActiveTransition(this.options.transitionLargeDisplay):this.setActiveTransition(this.options.transitionLargeDisplay),this.element.find("ul:first").addClass("pine-navbar"),this.element.find("li").has("ul").addClass("has-submenu"),this.element.find("a").on("focus.pine",this.focus),a(document).on("click.pine.submenu",this.SUBMENU+" > a",this,Pine.Submenu.toggle),a(document).on("click.pine.trigger",this.NAVBAR_TOGGLE,this,Pine.Navbar.toggle),a(b).on("load resize",a.proxy(this.api,this))},c.api=function(a){var b=this.checkMedia(a);return null===b?!1:(this.activeTransition&&"function"==typeof this.activeTransition.onSwitch&&this.activeTransition.onSwitch.call(this,!1),this.switchView(b),this.activeTransition&&"function"==typeof this.activeTransition.onSwitch&&this.activeTransition.onSwitch.call(this,!0),void 0)},c.checkMedia=function(a){var c=b.matchMedia("(min-width: "+this.options.jsBreakpoint+")").matches,d=a.type&&"load"==a.type;return!d&&(!this.isLargeDisplay&&!c||this.isLargeDisplay&&c)?null:this.isLargeDisplay=c},c.switchView=function(a){var b=this.getTransitionName(a);this.element.removeClass(this.getTransitionName(!a)).addClass(b),this.setActiveTransition(b)},c.focus=function(){var b=a(this),c=b.parent();c.hasClass("has-submenu")&&!c.hasClass("is-open")&&b.trigger(a.Event("mouseenter"));var d=a(".is-open");0!=d.length&&d.filter(function(){return 0===a(this).find(b).length}).removeClass("is-open")},c.setActiveTransition=function(a){this.activeTransition=this.transitions[a]||!1},c.getTransitionName=function(a){return a?this.options.transitionLargeDisplay:this.options.transitionSmallDisplay},c.registerTransition=function(a,b){this.transitions[a]=b},c.toggle=function(b){b.preventDefault(),a(this).toggleClass("is-active"),a(document).find(a(this).attr("href")).toggleClass("is-visible")},c}(window.Zepto||window.jQuery,window);var pine_fx_hover={onSwitch:function(a){a?$(document).on("mouseenter.pine.submenu, mouseleave.pine.submenu",this.SUBMENU,this,Pine.Submenu.hover).on("mouseenter.pine.submenu, mouseleave.pine.submenu",this.SUBMENU+" > a",this,Pine.Submenu.toggle).off("click.pine.submenu"):$(document).off("mouseenter.pine.submenu, mouseleave.pine.submenu").on("click.pine.submenu",this.SUBMENU+" > a",this,Pine.Submenu.toggle)},onToggle:function(){}};Pine.Navbar.registerTransition("fx-hover",pine_fx_hover),Pine.Navbar.registerTransition("fx-hover-fade",$.extend({},pine_fx_hover)),Pine.Navbar.registerTransition("fx-right-to-left",{onSwitch:function(a){var b=this.element,c=b.find("li").has("ul"),d=function(){$(".fx-right-to-left ul").css("width",$(window).width())};a?(c.each(function(){$(this).find("> ul").prepend($('<li class="back"><a href="#">'+$(this).find("> a").text()+"</a></li>"))}),$(document).on("click.pine.submenu",".back",this,Pine.Submenu.toggle),b.find("ul").css("width",$(window).width()),$(window).on("resize",d)):(b.find("ul").removeAttr("style"),c.find("li.back").remove(),$(window).off("resize",d))},onToggle:function(a){var b=$(this),c=b.parents("ul"),d=a?c.length-2:c.length;c.last().css("left",-100*d+"%")}}),Pine.Navbar.registerTransition("fx-left-to-right",{onSwitch:function(a){var b=this.element,c=b.find("li").has("ul"),d=function(){$(".fx-left-to-right ul").css("width",$(window).width())};a?(c.each(function(){$(this).find("> ul").prepend($('<li class="back"><a href="#">'+$(this).find("> a").text()+"</a></li>"))}),$(document).on("click.pine.submenu",".back",this,Pine.Submenu.toggle),b.find("ul").css("width",$(window).width()),$(window).on("resize",d)):(b.find("ul").removeAttr("style"),c.find("li.back").remove(),$(window).off("resize",d))},onToggle:function(a){var b=$(this),c=b.parents("ul"),d=a?c.length-2:c.length;c.last().css("right",-100*d+"%")}}),function(a,b){"use strict";var c=a.fn.pine;a.fn.pine=function(c){return this.each(function(){var d=a(this),e=d.data("pine"),f=a.extend({},d.data(),"object"==typeof c&&c);e||d.data("pine",e=b.Navbar.init(this,f))})},a.fn.pine.Module=b.Navbar,a.fn.pine.noConflict=function(){return a.fn.pine=c,this},a("[data-pine=navbar]").pine()}(jQuery,Pine);