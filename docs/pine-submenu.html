<!DOCTYPE html>

<html>
<head>
  <title>PineJS: Submenu</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="pine-navbar.html">
                pine-navbar.js
              </a>
            
              
              <a class="source" href="pine-submenu.html">
                pine-submenu.js
              </a>
            
              
              <a class="source" href="pine-transitions.html">
                pine-transitions.js
              </a>
            
              
              <a class="source" href="pine.html">
                pine.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="pinejs-submenu">PineJS: Submenu</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="pine-submenu-js">Pine-submenu.js</h2>
<p>Submodule handles behavior of each submenu in the navigation bar. Its basis purpose is to handle &#39;hover&#39; and &#39;toggle&#39;.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/**
  Global Pine object
**/</span>
<span class="keyword">var</span> Pine = window.Pine || {}

<span class="comment">/**
  Provides dropdown submenus for Responsive navigation module.
**/</span>
Pine.Submenu = (<span class="function"><span class="keyword">function</span><span class="params">($, window, undefined)</span> {</span> <span class="string">"use strict"</span>;

  <span class="keyword">var</span> version = <span class="string">'0.0.1'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Timer delays hiding of the submenu. It improves usability.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  timer = <span class="literal">null</span>,

  Submenu = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="method-hover">Method: Hover</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Event handler for hover.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Submenu.hover = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
    <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>)
    <span class="keyword">var</span> $submenu = $<span class="keyword">this</span>.find(<span class="string">'&gt; ul'</span>)

    <span class="keyword">if</span> (e.type == <span class="string">'mouseenter'</span>) {
      $submenu.addClass(<span class="string">'is-hover'</span>)
      clearTimeout(timer)
    }
    <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Delay hiding of the menu, usability thing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      timer = setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        $submenu.removeClass(<span class="string">'is-hover'</span>)
        $<span class="keyword">this</span>.removeClass(<span class="string">'is-open'</span>)
      },<span class="number">300</span>)
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>$(&#39;&gt; a&#39;, this).trigger($.Event(&#39;toggle.submenu&#39;))</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="method-toggle">Method: Toggle</h2>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Event handler for toggle.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Submenu.toggle = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>console.log(&quot;Toggle submenu: &quot; + e.type)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),
        $parent  = $<span class="keyword">this</span>.parent().closest(<span class="string">'li'</span>),
        isActive  = $parent.hasClass(<span class="string">'is-open'</span>),
        event = e,
        transition = e.data.activeTransition &amp;&amp; e.data.activeTransition.onToggle;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>default click behavior needs to close menus clearMenus()</p>
<p>Handle if the event was fired by link</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!isActive) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>if (&#39;ontouchstart&#39; in document.documentElement &amp;&amp; !$parent.closest(&#39;.navbar-nav&#39;).length) {
  // if mobile we we use a backdrop because click events don&#39;t delegate
  $(&#39;<div class="submenu-backdrop"/>&#39;).insertAfter($(this)).on(&#39;click&#39;, clearMenus)
}</p>
<p>Execute special pre-show hook</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (transition &amp;&amp; <span class="keyword">typeof</span> transition === <span class="string">'function'</span>) transition.call(<span class="keyword">this</span>, isActive);

      $parent.trigger(e = $.Event(<span class="string">'show.submenu'</span>))</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>add hover to child submenu
console.log(event)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (event.type == <span class="string">'mouseenter'</span>) $parent.find(<span class="string">'&gt; ul'</span>).addClass(<span class="string">'is-hover'</span>)

      $parent
        .addClass(<span class="string">'is-open'</span>)
        .trigger(<span class="string">'shown.submenu'</span>)
    }
    <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If submenu is hovered then return</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> ($parent.find(<span class="string">'&gt; ul'</span>).hasClass(<span class="string">'is-hover'</span>)) <span class="keyword">return</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Execute special pre-hide hook</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (transition &amp;&amp; <span class="keyword">typeof</span> transition === <span class="string">'function'</span>) transition.call(<span class="keyword">this</span>, isActive);

      $parent.trigger(e = $.Event(<span class="string">'hide.submenu'</span>))
      $parent.removeClass(<span class="string">'is-open'</span>).trigger(<span class="string">'hidden.submenu'</span>)
    }

    <span class="keyword">return</span> <span class="literal">false</span>
  };

  <span class="keyword">return</span> Submenu;

})(jQuery, window);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
